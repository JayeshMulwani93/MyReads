(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports={header:"Navigation_header__2SWiM",logo:"Navigation_logo__26DQR",nav:"Navigation_nav__1vGEH",active:"Navigation_active__75WZF"}},14:function(e,t,n){e.exports={reviews:"AddBookReview_reviews__1sEqp"}},17:function(e,t,n){e.exports={list:"Books_list__1LzT9",item:"Books_item__2Ejj3"}},22:function(e,t,n){e.exports={spinner:"LoadingSpinner_spinner__Ung5d"}},24:function(e,t,n){e.exports={login:"Login_login__350Jv"}},25:function(e,t,n){e.exports={profile:"UserProfile_profile__J6GG3"}},26:function(e,t,n){e.exports={book:"HighlightedBook_book__1wadF"}},27:function(e,t,n){e.exports={item:"BookReview_item__3r9md"}},28:function(e,t,n){e.exports={reviews:"BookReviews_reviews__1yAsM"}},29:function(e,t,n){e.exports={card:"Card_card__3KAIt"}},30:function(e,t,n){e.exports={form:"BookReviewForm_form__DuB5a",control:"BookReviewForm_control__I04zX",actions:"BookReviewForm_actions__3jD1g"}},31:function(e,t,n){e.exports={basic:"HomePage_basic__29lh1",item:"HomePage_item__ZfYYZ"}},32:function(e,t,n){e.exports=n(66)},41:function(e,t,n){},43:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),l=(n(41),n(1)),s=(n(43),n(3)),i=n(17),u=n.n(i),m=function(e){return r.a.createElement("div",{className:"centered"},r.a.createElement("ul",{className:u.a.list},e.books.map(function(e){return r.a.createElement("li",{className:u.a.item,key:e.id},r.a.createElement("figure",null,r.a.createElement("blockquote",null,r.a.createElement("p",null,e.name)),r.a.createElement("figcaption",null,e.author)),r.a.createElement(s.c,{className:"btn",to:"/books/".concat(e.id)},"View Details"))})))},d=n(11),f=n(7),p=n.n(f),E=n(9),v=n(8);function b(e,t){return"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"completed"}:e}var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(a.useReducer)(b,{status:t?"pending":null,data:null,error:null}),r=Object(v.a)(n,2),c=r[0],o=r[1],l=Object(a.useCallback)(function(){var t=Object(E.a)(p.a.mark(function t(n){var a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o({type:"SEND"}),t.prev=1,t.next=4,e(n);case 4:a=t.sent,o({type:"SUCCESS",responseData:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o({type:"ERROR",errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(d.a)({sendRequest:l},c)},h="https://awesome-books-2298e-default-rtdb.asia-southeast1.firebasedatabase.app";function w(){return k.apply(this,arguments)}function k(){return(k=Object(E.a)(p.a.mark(function e(){var t,n,a,r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/books.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=8;break}throw new Error(n.message||"Could not fetch Books.");case 8:for(r in a=[],n)c=Object(d.a)({id:r},n[r]),a.push(c);return e.abrupt("return",a);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e){return j.apply(this,arguments)}function j(){return(j=Object(E.a)(p.a.mark(function e(t){var n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/books/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a.message||"Could not fetch Book.");case 8:return r=Object(d.a)({id:t},a),e.abrupt("return",r);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e){return x.apply(this,arguments)}function x(){return(x=Object(E.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/reviews/").concat(t.bookId,".json"),{method:"POST",body:JSON.stringify(t.reviewData),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a.message||"Could not add review.");case 8:return e.abrupt("return",{reviewId:a.name});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e){return R.apply(this,arguments)}function R(){return(R=Object(E.a)(p.a.mark(function e(t){var n,a,r,c,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/reviews/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a.message||"Could not get reviews.");case 8:for(c in r=[],a)o=Object(d.a)({id:c},a[c]),r.push(o);return e.abrupt("return",r);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var y=n(22),S=n.n(y),C=function(){return r.a.createElement("div",{className:S.a.spinner})},I=function(){var e=g(w,!0),t=e.sendRequest,n=e.status,c=e.data,o=e.error;return Object(a.useEffect)(function(){t()},[t]),"pending"===n?r.a.createElement("div",{className:"centered"},r.a.createElement(C,null)):o?r.a.createElement("p",{className:"centered focused"},o):"completed"!==n||c&&0!==c.length?r.a.createElement(m,{books:c}):r.a.createElement("p",null,"No books Found!")},L=n(23),F=n.n(L),B=r.a.createContext({isLoggedIn:!1,profile:{},onLogin:function(){},onLogout:function(){}}),P=function(e){var t=Object(a.useState)(!1),n=Object(v.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)({}),s=Object(v.a)(l,2),i=s[0],u=s[1];Object(a.useEffect)(function(){var e=localStorage.getItem("userProfile");null!==e&&(o(!0),u(JSON.parse(e)))},[]);return r.a.createElement(B.Provider,{value:{isLoggedIn:c,profile:i,onLogin:function(e){e&&(console.log("Login Completed!"),console.info("AuthProfile is"),console.log(e),localStorage.setItem("userProfile",JSON.stringify(e)),o(!0),u(e))},onLogout:function(e){console.log("Logout Completed!"),localStorage.removeItem("userProfile"),o(!1),u({})}}},e.children)},D=B,A=n(24),q=n.n(A),J=!1,G=function(){var e=Object(a.useContext)(D),t=Object(l.h)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:q.a.login},r.a.createElement("h1",null,"Please Login to access My library"),r.a.createElement(F.a,{clientId:"Enter value here when Google Login is enabled!",buttonText:"Login with Google",onSuccess:function(n){e.onLogin(n.profileObj),t.push("/books")},onFailure:function(e){console.log("Error while logging in with Google!")},cookiePolicy:"single_host_origin"}))))},M=n(13),T=n.n(M),H=function(){var e=Object(a.useContext)(D),t=Object(l.h)();return r.a.createElement("header",{className:T.a.header},r.a.createElement("h2",{className:T.a.logo},"My Reads"),r.a.createElement("div",{className:T.a.nav},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(s.c,{to:"/books"},"Books")),J&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(s.c,{to:"/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement(s.c,{to:"/",onClick:function(){e.onLogout(),t.push("/")},className:"btn"},"Logout"))))))},U=n(25),Z=n.n(U),z=function(){var e=Object(a.useContext)(D).profile;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Z.a.profile},r.a.createElement("p",null,"Name: ",e.name),r.a.createElement("p",null,"Email: ",e.email),r.a.createElement("img",{src:e.imageUrl,alt:"Profile"})))},W=function(){return r.a.createElement("div",{className:"centered"},r.a.createElement(z,null))},Y=n(26),K=n.n(Y),Q=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("figure",{className:K.a.book},r.a.createElement("h2",null,e.name),r.a.createElement("p",null,e.description),r.a.createElement("figcaption",null,e.author)))},V=n(27),X=n.n(V),$=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:X.a.item},r.a.createElement("figure",null,r.a.createElement("blockquote",null,r.a.createElement("p",null,e.title)),r.a.createElement("figcaption",null,e.rating,"/5"),r.a.createElement("p",null,e.description))))},ee=n(28),te=n.n(ee),ne=n(14),ae=n.n(ne),re=n(29),ce=n.n(re),oe=function(e){return r.a.createElement("div",{className:ce.a.card},e.children)},le=n(30),se=n.n(le),ie=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null,r.a.createElement("form",{className:"form",onSubmit:function(a){a.preventDefault(),e.onAdd({title:t.current.value,rating:n.current.value,description:c.current.value})}},r.a.createElement("div",{className:se.a.control},r.a.createElement("div",null,r.a.createElement("label",null,"Title"),r.a.createElement("input",{type:"text",ref:t})),r.a.createElement("div",null,r.a.createElement("label",null,"Rating"),r.a.createElement("input",{type:"number",min:"1",max:"5",ref:n})),r.a.createElement("div",null,r.a.createElement("label",null,"Description"),r.a.createElement("input",{type:"text",ref:c}))),r.a.createElement("button",{className:"btn"},"Submit Review"))))},ue=function(e){var t=g(N),n=t.sendRequest,c=t.status,o=t.error,s=Object(a.useState)(!1),i=Object(v.a)(s,2),u=i[0],m=i[1];return Object(a.useEffect)(function(){"completed"===c&&(m(!1),e.onAddReview())},[c]),"pending"===c?r.a.createElement("div",{className:"centered"},r.a.createElement(C,null)):o?r.a.createElement("p",{className:"centered focused"},o):u?r.a.createElement("section",{className:ae.a.reviews},r.a.createElement(l.a,{when:u,message:"Are you sure? All Data entered will be lost!"}),r.a.createElement("div",{className:ae.a["add-review"]},r.a.createElement(ie,{onAdd:function(t){n({bookId:e.bookId,reviewData:t})}}))):r.a.createElement("section",{className:ae.a.reviews},r.a.createElement("button",{onClick:function(){m(!0)},className:"btn"},"Add Review"))},me=function(e){var t=e.id,n=g(O,!0),c=n.sendRequest,o=n.status,l=n.data,s=n.error;Object(a.useEffect)(function(){c(t)},[c,t]);var i=Object(a.useCallback)(function(){c(t)},[c,t]);if("pending"===o)return r.a.createElement("div",{className:"centered"},r.a.createElement(C,null));if(s)return r.a.createElement("p",{className:"centered focused"},s);var u=void 0;return u="completed"!==o||l&&0!==l.length?r.a.createElement("ul",{className:te.a.reviews},l.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement($,{title:e.title,rating:e.rating,description:e.description}))})):r.a.createElement("p",null,"No Reviews Found!"),r.a.createElement("section",null,r.a.createElement(ue,{bookId:t,onAddReview:i}),u)},de=function(){var e=Object(l.i)().bookId,t=g(_,!0),n=t.sendRequest,c=t.status,o=t.error,i=t.data;return Object(a.useEffect)(function(){n(e)},[]),"pending"===c?r.a.createElement("div",{className:"centered"},r.a.createElement(C,null)):o?r.a.createElement("p",{className:"centered focused"},o):"completed"!==c||i&&null!==i?r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{name:i.name,author:i.author,description:i.description}),r.a.createElement("div",{className:"centered"},r.a.createElement(l.c,{path:"/books/".concat(e),exact:!0},r.a.createElement(s.b,{to:"/books/".concat(e,"/reviews"),className:"btn"},"Show Reviews")),r.a.createElement(l.c,{path:"/books/".concat(e,"/reviews"),exact:!0},r.a.createElement(me,{id:e})))):r.a.createElement("p",null,"No Book Found!")},fe=n(31),pe=n.n(fe),Ee=function(){return r.a.createElement("div",{className:pe.a.basic},r.a.createElement("h1",null,"Hello Fellow Readers"),r.a.createElement("h2",null,"This is a sample React Project that highlights the books I've Read."))};var ve=function(){var e=Object(a.useContext)(D);return!J||e.isLoggedIn?r.a.createElement("div",null,r.a.createElement(H,null),r.a.createElement(l.e,null,r.a.createElement(l.c,{path:"/",exact:!0},r.a.createElement(Ee,null)),r.a.createElement(l.c,{path:"/books",exact:!0},r.a.createElement(I,null)),r.a.createElement(l.c,{path:"/books/:bookId"},r.a.createElement(de,null)),J&&r.a.createElement(l.c,{path:"/profile",exact:!0},r.a.createElement(W,null)),r.a.createElement(l.c,{path:"*"},r.a.createElement(l.b,{to:"/"})))):r.a.createElement(G,null)};o.a.createRoot(document.getElementById("root")).render(r.a.createElement(P,null,r.a.createElement(s.a,null,r.a.createElement(ve,null))))}},[[32,2,1]]]);
//# sourceMappingURL=main.343479da.chunk.js.map