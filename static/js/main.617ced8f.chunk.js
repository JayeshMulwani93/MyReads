(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports={header:"Navigation_header__2SWiM",logo:"Navigation_logo__26DQR",nav:"Navigation_nav__1vGEH",active:"Navigation_active__75WZF"}},14:function(e,t,n){e.exports={reviews:"AddBookReview_reviews__1sEqp"}},17:function(e,t,n){e.exports={list:"Books_list__1LzT9",item:"Books_item__2Ejj3"}},22:function(e,t,n){e.exports={spinner:"LoadingSpinner_spinner__Ung5d"}},24:function(e,t,n){e.exports={login:"Login_login__350Jv"}},25:function(e,t,n){e.exports={profile:"UserProfile_profile__J6GG3"}},26:function(e,t,n){e.exports={card:"Card_card__3KAIt"}},27:function(e,t,n){e.exports={book:"HighlightedBook_book__1wadF"}},28:function(e,t,n){e.exports={item:"BookReview_item__3r9md"}},29:function(e,t,n){e.exports={reviews:"BookReviews_reviews__1yAsM"}},30:function(e,t,n){e.exports={form:"BookReviewForm_form__DuB5a",control:"BookReviewForm_control__I04zX",actions:"BookReviewForm_actions__3jD1g"}},31:function(e,t,n){e.exports=n(64)},40:function(e,t,n){},42:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),l=(n(40),n(1)),s=(n(42),n(2)),i=n(17),u=n.n(i),m=function(e){return r.a.createElement("div",{className:"centered"},r.a.createElement("ul",{className:u.a.list},e.books.map(function(e){return r.a.createElement("li",{className:u.a.item,key:e.id},r.a.createElement("figure",null,r.a.createElement("blockquote",null,r.a.createElement("p",null,e.name)),r.a.createElement("figcaption",null,e.author)),r.a.createElement(s.c,{className:"btn",to:"/books/".concat(e.id)},"View Details"))})))},d=n(11),p=n(7),f=n.n(p),E=n(9),b=n(8);function v(e,t){return"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"completed"}:e}var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(a.useReducer)(v,{status:t?"pending":null,data:null,error:null}),r=Object(b.a)(n,2),c=r[0],o=r[1],l=Object(a.useCallback)(function(){var t=Object(E.a)(f.a.mark(function t(n){var a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o({type:"SEND"}),t.prev=1,t.next=4,e(n);case 4:a=t.sent,o({type:"SUCCESS",responseData:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o({type:"ERROR",errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(d.a)({sendRequest:l},c)},h="https://awesome-books-2298e-default-rtdb.asia-southeast1.firebasedatabase.app";function k(){return w.apply(this,arguments)}function w(){return(w=Object(E.a)(f.a.mark(function e(){var t,n,a,r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/books.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=8;break}throw new Error(n.message||"Could not fetch Books.");case 8:for(r in a=[],n)c=Object(d.a)({id:r},n[r]),a.push(c);return e.abrupt("return",a);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e){return j.apply(this,arguments)}function j(){return(j=Object(E.a)(f.a.mark(function e(t){var n,a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/books/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a.message||"Could not fetch Book.");case 8:return r=Object(d.a)({id:t},a),e.abrupt("return",r);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e){return x.apply(this,arguments)}function x(){return(x=Object(E.a)(f.a.mark(function e(t){var n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/reviews/").concat(t.bookId,".json"),{method:"POST",body:JSON.stringify(t.reviewData),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a.message||"Could not add review.");case 8:return e.abrupt("return",{reviewId:a.name});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e){return y.apply(this,arguments)}function y(){return(y=Object(E.a)(f.a.mark(function e(t){var n,a,r,c,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/reviews/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a.message||"Could not get reviews.");case 8:for(c in r=[],a)o=Object(d.a)({id:c},a[c]),r.push(o);return e.abrupt("return",r);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var R=n(22),S=n.n(R),C=function(){return r.a.createElement("div",{className:S.a.spinner})},L=function(){var e=g(k,!0),t=e.sendRequest,n=e.status,c=e.data,o=e.error;return Object(a.useEffect)(function(){t()},[t]),"pending"===n?r.a.createElement("div",{className:"centered"},r.a.createElement(C,null)):o?r.a.createElement("p",{className:"centered focused"},o):"completed"!==n||c&&0!==c.length?r.a.createElement(m,{books:c}):r.a.createElement("p",null,"No books Found!")},I=n(23),B=n.n(I),F=r.a.createContext({isLoggedIn:!1,profile:{},onLogin:function(){},onLogout:function(){}}),D=function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)({}),s=Object(b.a)(l,2),i=s[0],u=s[1];Object(a.useEffect)(function(){var e=localStorage.getItem("userProfile");null!==e&&(o(!0),u(JSON.parse(e)))},[]);return r.a.createElement(F.Provider,{value:{isLoggedIn:c,profile:i,onLogin:function(e){console.log("Login Completed!"),localStorage.setItem("userProfile",JSON.stringify(e)),o(!0),u(e)},onLogout:function(e){console.log("Logout Completed!"),localStorage.removeItem("userProfile"),o(!1),u({})}}},e.children)},A=F,q=n(24),P=n.n(q),J=function(){var e=Object(a.useContext)(A),t=Object(l.g)(),n=function(n){e.onLogin(n.profileObj),t.push("/books")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:P.a.login},r.a.createElement("h1",null,"Please Login to access My library"),r.a.createElement(B.a,{clientId:"181690030512-r2lu1t2gbesfae1ah3qkn4lgj34psu0r.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:n,onFailure:n,cookiePolicy:"single_host_origin"}))))},M=n(13),T=n.n(M),U=function(){var e=Object(a.useContext)(A),t=Object(l.g)();return r.a.createElement("header",{className:T.a.header},r.a.createElement("h2",{className:T.a.logo},"My Library"),r.a.createElement("div",{className:T.a.nav},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(s.c,{to:"/books"},"Books")),r.a.createElement("li",null,r.a.createElement(s.c,{to:"/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement(s.c,{to:"/",onClick:function(){e.onLogout(),t.push("/")},className:"btn"},"Logout")))))},G=n(25),z=n.n(G),H=function(){var e=Object(a.useContext)(A).profile;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:z.a.profile},r.a.createElement("p",null,"Name: ",e.name),r.a.createElement("p",null,"Email: ",e.email),r.a.createElement("img",{src:e.imageUrl})))},W=n(26),K=n.n(W),Q=function(e){return r.a.createElement("div",{className:K.a.card},e.children)},V=function(){return r.a.createElement("div",{className:"centered"},r.a.createElement(H,null))},X=n(27),Z=n.n(X),Y=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("figure",{className:Z.a.book},r.a.createElement("h2",null,e.name),r.a.createElement("p",null,e.description),r.a.createElement("figcaption",null,e.author)))},$=n(28),ee=n.n($),te=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ee.a.item},r.a.createElement("figure",null,r.a.createElement("blockquote",null,r.a.createElement("p",null,e.title)),r.a.createElement("figcaption",null,e.rating,"/5"),r.a.createElement("p",null,e.description))))},ne=n(29),ae=n.n(ne),re=n(14),ce=n.n(re),oe=n(30),le=n.n(oe),se=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null,r.a.createElement("form",{className:"form",onSubmit:function(a){a.preventDefault(),e.onAdd({title:t.current.value,rating:n.current.value,description:c.current.value})}},r.a.createElement("div",{className:le.a.control},r.a.createElement("div",null,r.a.createElement("label",null,"Title"),r.a.createElement("input",{type:"text",ref:t})),r.a.createElement("div",null,r.a.createElement("label",null,"Rating"),r.a.createElement("input",{type:"number",min:"1",max:"5",ref:n})),r.a.createElement("div",null,r.a.createElement("label",null,"Description"),r.a.createElement("input",{type:"text",ref:c}))),r.a.createElement("button",{className:"btn"},"Submit Review"))))},ie=function(e){var t=g(N),n=t.sendRequest,c=t.status,o=t.error,s=Object(a.useState)(!1),i=Object(b.a)(s,2),u=i[0],m=i[1];return Object(a.useEffect)(function(){"completed"===c&&(m(!1),e.onAddReview())},[c]),"pending"===c?r.a.createElement("div",{className:"centered"},r.a.createElement(C,null)):o?r.a.createElement("p",{className:"centered focused"},o):u?r.a.createElement("section",{className:ce.a.reviews},r.a.createElement(l.a,{when:u,message:"Are you sure? All Data entered will be lost!"}),r.a.createElement("div",{className:ce.a["add-review"]},r.a.createElement(se,{onAdd:function(t){n({bookId:e.bookId,reviewData:t})}}))):r.a.createElement("section",{className:ce.a.reviews},r.a.createElement("button",{onClick:function(){m(!0)},className:"btn"},"Add Review"))},ue=function(e){var t=e.id,n=g(O,!0),c=n.sendRequest,o=n.status,l=n.data,s=n.error;Object(a.useEffect)(function(){c(t)},[c,t]);var i=Object(a.useCallback)(function(){c(t)},[c,t]);if("pending"===o)return r.a.createElement("div",{className:"centered"},r.a.createElement(C,null));if(s)return r.a.createElement("p",{className:"centered focused"},s);var u=void 0;return u="completed"!==o||l&&0!==l.length?r.a.createElement("ul",{className:ae.a.reviews},l.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(te,{title:e.title,rating:e.rating,description:e.description}))})):r.a.createElement("p",null,"No Reviews Found!"),r.a.createElement("section",null,r.a.createElement(ie,{bookId:t,onAddReview:i}),u)},me=function(){var e=Object(l.h)().bookId,t=g(_,!0),n=t.sendRequest,c=t.status,o=t.error,i=t.data;return Object(a.useEffect)(function(){n(e)},[]),"pending"===c?r.a.createElement("div",{className:"centered"},r.a.createElement(C,null)):o?r.a.createElement("p",{className:"centered focused"},o):"completed"!==c||i&&null!==i?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{name:i.name,author:i.author,description:i.description}),r.a.createElement("div",{className:"centered"},r.a.createElement(l.b,{path:"/books/".concat(e),exact:!0},r.a.createElement(s.b,{to:"/books/".concat(e,"/reviews"),className:"btn"},"Show Reviews")),r.a.createElement(l.b,{path:"/books/".concat(e,"/reviews"),exact:!0},r.a.createElement(ue,{id:e})))):r.a.createElement("p",null,"No Book Found!")};var de=function(){return Object(a.useContext)(A).isLoggedIn?r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/books",exact:!0},r.a.createElement(L,null)),r.a.createElement(l.b,{path:"/books/:bookId"},r.a.createElement(me,null)),r.a.createElement(l.b,{path:"/profile",exact:!0},r.a.createElement(V,null)))):r.a.createElement(J,null)};o.a.createRoot(document.getElementById("root")).render(r.a.createElement(D,null,r.a.createElement(s.a,null,r.a.createElement(de,null))))}},[[31,2,1]]]);
//# sourceMappingURL=main.617ced8f.chunk.js.map